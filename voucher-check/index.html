<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Voucher Check</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;padding:24px;max-width:600px;margin:auto}
  .card{border:1px solid #e6e6e6;border-radius:12px;padding:20px}
  .ok{color:#0a0}.bad{color:#c00}.muted{color:#666}
</style>
<div id="app" class="card">Checkingâ€¦</div>
<script>
(async () => {
  const params = new URLSearchParams(location.search);
  const t = params.get('t');
  const app = document.getElementById('app');
  if (!t) { app.innerHTML = '<p class="bad">Missing token.</p>'; return; }

  const res = await fetch('https://iqpyenvbffttechtjohx.functions.supabase.co/r', {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_ANON_KEY',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ t })
  });

  const html = await res.text();      // deine Function liefert HTML
  app.innerHTML = html;
})();
</script>
